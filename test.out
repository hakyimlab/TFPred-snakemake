1 valid TF-tissue pairs were found.
Building DAG of jobs...
Job stats:
job                              count    min threads    max threads
-----------------------------  -------  -------------  -------------
aggregate_predictions                1              1              1
all                                  1              1              1
create_enformer_configuration        1              1              1
create_training_set                  1              1              1
evaluate_TFPred                      1              1              1
find_homer_motifs                    1              1              1
merge_homer_motifs                   1              1              1
predict_with_enformer                1              1              1
prepare_training_data                1              1              1
train_TFPred_weights                 1              1              1
total                               10              1              1


[Fri May 10 15:01:42 2024]
Job 1: working on motif_file=ar-half,tf=AR
Reason: Missing output files: data/cistrome_1_AR_2024-05-10/homer_files/AR/scanMotifsGenomeWide_ar-half.txt


        perl /project2/haky/temi/software/homer/bin/scanMotifGenomeWide.pl data/cistrome_1_AR_2024-05-10/homer_files/AR/ar-half.motif /project2/haky/temi/software/homer/data/genomes/hg38 > data/cistrome_1_AR_2024-05-10/homer_files/AR/scanMotifsGenomeWide_ar-half.txt
        

[Fri May 10 15:01:42 2024]
Job 2: working on tf=AR data/cistrome_1_AR_2024-05-10/homer_files/AR/scanMotifsGenomeWide_ar-half.txt
Reason: Missing output files: data/cistrome_1_AR_2024-05-10/homer_files/AR/merged_motif_file.txt; Input files updated by another job: data/cistrome_1_AR_2024-05-10/homer_files/AR/scanMotifsGenomeWide_ar-half.txt

[Fri May 10 15:01:42 2024]
Job 3: working on tf=AR,tissue=Prostate
Reason: Missing output files: data/cistrome_1_AR_2024-05-10/predictor_files/AR_Prostate.info.txt.gz, data/cistrome_1_AR_2024-05-10/predictor_files/AR_Prostate.summary.txt, data/cistrome_1_AR_2024-05-10/predictor_files/AR_Prostate.ground_truth.txt, data/cistrome_1_AR_2024-05-10/predictor_files/AR_Prostate.predictors.txt; Input files updated by another job: data/cistrome_1_AR_2024-05-10/homer_files/AR/merged_motif_file.txt


        /beagle3/haky/users/shared_software/TFXcan-pipeline-tools/bin/Rscript workflow/src/create_training_sets_bedtools.R --transcription_factor AR --tissue Prostate --predicted_motif_file data/cistrome_1_AR_2024-05-10/homer_files/AR/merged_motif_file.txt --sorted_bedfiles_directory data/cistrome_1_AR_2024-05-10/sortedbeds/AR_Prostate --bedlinks_directory data/cistrome_1_AR_2024-05-10/bed_links/AR_Prostate --predictors_file data/cistrome_1_AR_2024-05-10/predictor_files/AR_Prostate.predictors.txt --ground_truth_file data/cistrome_1_AR_2024-05-10/predictor_files/AR_Prostate.ground_truth.txt --info_file data/cistrome_1_AR_2024-05-10/predictor_files/AR_Prostate.info.txt.gz --cistrome_metadata_file /project2/haky/Data/TFXcan/cistrome/raw/human_factor_full_QC.txt --dcids 37094 --train_by_chromosome True --summary_file data/cistrome_1_AR_2024-05-10/predictor_files/AR_Prostate.summary.txt; sleep 5
        

[Fri May 10 15:01:42 2024]
Job 4: working on tf=AR,tissue=Prostate
Reason: Missing output files: data/cistrome_1_AR_2024-05-10/prediction_parameters/enformer_parameters_cistrome_1_AR_AR_Prostate.json; Input files updated by another job: data/cistrome_1_AR_2024-05-10/predictor_files/AR_Prostate.predictors.txt


            /beagle3/haky/users/shared_software/TFXcan-pipeline-tools/bin/Rscript workflow/src/create_enformer_config.R --dataset cistrome_1_AR --transcription_factor AR --tissue Prostate --base_directives config/enformer_base.yaml --project_directory /scratch/midway3/temi --predictors_file data/cistrome_1_AR_2024-05-10/predictor_files/AR_Prostate.predictors.txt --model /project2/haky/Data/enformer/raw --fasta_file /project2/haky/Data/hg_sequences/hg38/Homo_sapiens_assembly38.fasta --parameters_file data/cistrome_1_AR_2024-05-10/prediction_parameters/enformer_parameters_cistrome_1_AR_AR_Prostate.json --date 2024-05-10
        

[Fri May 10 15:01:42 2024]
Job 5: working on AR_Prostate
Reason: Missing output files: data/cistrome_1_AR_2024-05-10/prediction_parameters/aggregation_config_cistrome_1_AR_AR_Prostate.json; Input files updated by another job: data/cistrome_1_AR_2024-05-10/prediction_parameters/enformer_parameters_cistrome_1_AR_AR_Prostate.json


            python3 /beagle3/haky/users/shared_pipelines/enformer_pipeline_aggregate/scripts/enformer_predict.py --parameters data/cistrome_1_AR_2024-05-10/prediction_parameters/enformer_parameters_cistrome_1_AR_AR_Prostate.json
        

[Fri May 10 15:01:42 2024]
Job 6: working on tf=AR,tissue=Prostate
Reason: Missing output files: data/cistrome_1_AR_2024-05-10/aggregation_folder/cistrome_1_AR_aggByCollect_AR_Prostate.csv.gz; Input files updated by another job: data/cistrome_1_AR_2024-05-10/prediction_parameters/aggregation_config_cistrome_1_AR_AR_Prostate.json

[Fri May 10 15:01:42 2024]
Job 7: preparing tf=AR,tissue=Prostate training and test data
Reason: Missing output files: data/cistrome_1_AR_2024-05-10/aggregation_folder/test_cistrome_1_AR_aggByCollect_AR_Prostate.prepared.csv.gz, data/cistrome_1_AR_2024-05-10/aggregation_folder/train_cistrome_1_AR_aggByCollect_AR_Prostate.prepared.csv.gz; Input files updated by another job: data/cistrome_1_AR_2024-05-10/aggregation_folder/cistrome_1_AR_aggByCollect_AR_Prostate.csv.gz, data/cistrome_1_AR_2024-05-10/predictor_files/AR_Prostate.ground_truth.txt


            /beagle3/haky/users/shared_software/TFXcan-pipeline-tools/bin/Rscript workflow/src/train_test_split.R --data_file data/cistrome_1_AR_2024-05-10/aggregation_folder/cistrome_1_AR_aggByCollect_AR_Prostate.csv.gz --ground_truth_file data/cistrome_1_AR_2024-05-10/predictor_files/AR_Prostate.ground_truth.txt --aggregation_method aggByCollect --train_prepared_file data/cistrome_1_AR_2024-05-10/aggregation_folder/train_cistrome_1_AR_aggByCollect_AR_Prostate.prepared.csv.gz --test_prepared_file data/cistrome_1_AR_2024-05-10/aggregation_folder/test_cistrome_1_AR_aggByCollect_AR_Prostate.prepared.csv.gz
        

[Fri May 10 15:01:42 2024]
Job 8: training on tf=AR,tissue=Prostate training data
Reason: Missing output files: output/models/cistrome_1_AR_AR_Prostate_2024-05-10/aggByCollect_AR_Prostate.linear.rds, output/models/cistrome_1_AR_AR_Prostate_2024-05-10/aggByCollect_AR_Prostate.logistic.rds; Input files updated by another job: data/cistrome_1_AR_2024-05-10/aggregation_folder/train_cistrome_1_AR_aggByCollect_AR_Prostate.prepared.csv.gz


            /beagle3/haky/users/shared_software/TFXcan-pipeline-tools/bin/Rscript workflow/src/train_enet.R --train_data_file data/cistrome_1_AR_2024-05-10/aggregation_folder/train_cistrome_1_AR_aggByCollect_AR_Prostate.prepared.csv.gz --rds_file output/models/cistrome_1_AR_AR_Prostate_2024-05-10/aggByCollect_AR_Prostate --nfolds 5; sleep 12
        

[Fri May 10 15:01:42 2024]
Job 9: evaluating on tf=AR,tissue=Prostate training and test data
Reason: Missing output files: output/models_eval/cistrome_1_AR_AR_Prostate_2024-05-10/aggByCollect_AR_Prostate.linear.test_eval.txt.gz, output/models_eval/cistrome_1_AR_AR_Prostate_2024-05-10/aggByCollect_AR_Prostate.logistic.test_eval.txt.gz, output/models_eval/cistrome_1_AR_AR_Prostate_2024-05-10/aggByCollect_AR_Prostate.linear.train_eval.txt.gz, output/models_eval/cistrome_1_AR_AR_Prostate_2024-05-10/aggByCollect_AR_Prostate.logistic.train_eval.txt.gz; Input files updated by another job: data/cistrome_1_AR_2024-05-10/aggregation_folder/test_cistrome_1_AR_aggByCollect_AR_Prostate.prepared.csv.gz, output/models/cistrome_1_AR_AR_Prostate_2024-05-10/aggByCollect_AR_Prostate.linear.rds, data/cistrome_1_AR_2024-05-10/aggregation_folder/train_cistrome_1_AR_aggByCollect_AR_Prostate.prepared.csv.gz, output/models/cistrome_1_AR_AR_Prostate_2024-05-10/aggByCollect_AR_Prostate.logistic.rds


            /beagle3/haky/users/shared_software/TFXcan-pipeline-tools/bin/Rscript workflow/src/evaluate_enet.R --linear_model output/models/cistrome_1_AR_AR_Prostate_2024-05-10/aggByCollect_AR_Prostate.linear.rds --logistic_model output/models/cistrome_1_AR_AR_Prostate_2024-05-10/aggByCollect_AR_Prostate.logistic.rds --train_data_file data/cistrome_1_AR_2024-05-10/aggregation_folder/train_cistrome_1_AR_aggByCollect_AR_Prostate.prepared.csv.gz --test_data_file data/cistrome_1_AR_2024-05-10/aggregation_folder/test_cistrome_1_AR_aggByCollect_AR_Prostate.prepared.csv.gz --eval_output output/models_eval/cistrome_1_AR_AR_Prostate_2024-05-10/aggByCollect_AR_Prostate
        

[Fri May 10 15:01:42 2024]
localrule all:
    input: metadata/valid_TFs.csv, data/cistrome_1_AR_2024-05-10/homer_files/AR/ar-half.motif, data/cistrome_1_AR_2024-05-10/homer_files/AR/scanMotifsGenomeWide_ar-half.txt, data/cistrome_1_AR_2024-05-10/homer_files/AR/merged_motif_file.txt, data/cistrome_1_AR_2024-05-10/predictor_files/AR_Prostate.predictors.txt, data/cistrome_1_AR_2024-05-10/predictor_files/AR_Prostate.ground_truth.txt, data/cistrome_1_AR_2024-05-10/predictor_files/AR_Prostate.info.txt.gz, data/cistrome_1_AR_2024-05-10/predictor_files/AR_Prostate.summary.txt, data/cistrome_1_AR_2024-05-10/prediction_parameters/enformer_parameters_cistrome_1_AR_AR_Prostate.json, data/cistrome_1_AR_2024-05-10/prediction_parameters/aggregation_config_cistrome_1_AR_AR_Prostate.json, data/cistrome_1_AR_2024-05-10/aggregation_folder/cistrome_1_AR_aggByCollect_AR_Prostate.csv.gz, data/cistrome_1_AR_2024-05-10/aggregation_folder/train_cistrome_1_AR_aggByCollect_AR_Prostate.prepared.csv.gz, data/cistrome_1_AR_2024-05-10/aggregation_folder/test_cistrome_1_AR_aggByCollect_AR_Prostate.prepared.csv.gz, output/models/cistrome_1_AR_AR_Prostate_2024-05-10/aggByCollect_AR_Prostate.logistic.rds, output/models/cistrome_1_AR_AR_Prostate_2024-05-10/aggByCollect_AR_Prostate.linear.rds, output/models_eval/cistrome_1_AR_AR_Prostate_2024-05-10/aggByCollect_AR_Prostate.linear.train_eval.txt.gz, output/models_eval/cistrome_1_AR_AR_Prostate_2024-05-10/aggByCollect_AR_Prostate.logistic.train_eval.txt.gz, output/models_eval/cistrome_1_AR_AR_Prostate_2024-05-10/aggByCollect_AR_Prostate.linear.test_eval.txt.gz, output/models_eval/cistrome_1_AR_AR_Prostate_2024-05-10/aggByCollect_AR_Prostate.logistic.test_eval.txt.gz
    jobid: 0
    reason: Input files updated by another job: output/models_eval/cistrome_1_AR_AR_Prostate_2024-05-10/aggByCollect_AR_Prostate.linear.test_eval.txt.gz, output/models_eval/cistrome_1_AR_AR_Prostate_2024-05-10/aggByCollect_AR_Prostate.logistic.test_eval.txt.gz, data/cistrome_1_AR_2024-05-10/prediction_parameters/aggregation_config_cistrome_1_AR_AR_Prostate.json, data/cistrome_1_AR_2024-05-10/predictor_files/AR_Prostate.summary.txt, output/models/cistrome_1_AR_AR_Prostate_2024-05-10/aggByCollect_AR_Prostate.linear.rds, data/cistrome_1_AR_2024-05-10/homer_files/AR/scanMotifsGenomeWide_ar-half.txt, data/cistrome_1_AR_2024-05-10/aggregation_folder/test_cistrome_1_AR_aggByCollect_AR_Prostate.prepared.csv.gz, data/cistrome_1_AR_2024-05-10/predictor_files/AR_Prostate.predictors.txt, output/models/cistrome_1_AR_AR_Prostate_2024-05-10/aggByCollect_AR_Prostate.logistic.rds, data/cistrome_1_AR_2024-05-10/homer_files/AR/merged_motif_file.txt, data/cistrome_1_AR_2024-05-10/aggregation_folder/cistrome_1_AR_aggByCollect_AR_Prostate.csv.gz, data/cistrome_1_AR_2024-05-10/prediction_parameters/enformer_parameters_cistrome_1_AR_AR_Prostate.json, data/cistrome_1_AR_2024-05-10/aggregation_folder/train_cistrome_1_AR_aggByCollect_AR_Prostate.prepared.csv.gz, output/models_eval/cistrome_1_AR_AR_Prostate_2024-05-10/aggByCollect_AR_Prostate.logistic.train_eval.txt.gz, output/models_eval/cistrome_1_AR_AR_Prostate_2024-05-10/aggByCollect_AR_Prostate.linear.train_eval.txt.gz, data/cistrome_1_AR_2024-05-10/predictor_files/AR_Prostate.info.txt.gz, data/cistrome_1_AR_2024-05-10/predictor_files/AR_Prostate.ground_truth.txt
    resources: mem_mb=<TBD>, disk_mb=<TBD>, tmpdir=/scratch/midway3/temi, partition=caslake, time=02:00:00, account=pi-haky, nodes=1, gpu=0, mem_cpu=4, cpu_task=8

Job stats:
job                              count    min threads    max threads
-----------------------------  -------  -------------  -------------
aggregate_predictions                1              1              1
all                                  1              1              1
create_enformer_configuration        1              1              1
create_training_set                  1              1              1
evaluate_TFPred                      1              1              1
find_homer_motifs                    1              1              1
merge_homer_motifs                   1              1              1
predict_with_enformer                1              1              1
prepare_training_data                1              1              1
train_TFPred_weights                 1              1              1
total                               10              1              1

Reasons:
    (check individual jobs above for details)
    input files updated by another job:
        aggregate_predictions, all, create_enformer_configuration, create_training_set, evaluate_TFPred, merge_homer_motifs, predict_with_enformer, prepare_training_data, train_TFPred_weights
    missing output files:
        aggregate_predictions, create_enformer_configuration, create_training_set, evaluate_TFPred, find_homer_motifs, merge_homer_motifs, predict_with_enformer, prepare_training_data, train_TFPred_weights

This was a dry-run (flag -n). The order of jobs does not reflect the order of execution.
